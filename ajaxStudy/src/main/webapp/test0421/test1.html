<!DOCTYPE html>
<!-- /webapp/test0421/test1.html
   test1.html: ajax 객체를 통해 test1.jsp의 숫자 중 가장 큰값을 찾아 result 영역에 출력하기 
   test1.jsp : 0~99사이의 임의의 값을 10 개 생성하여 ,로 연결하여 전송하기
-->
<html>
<head>
<meta charset="UTF-8">
<title>ajax Test</title>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
</head>
<body><div id="result"></div>
<button type="button" onclick="getMaxNum()">가장큰값</button>
<script type="text/javascript">
	function getMaxNum() {
		const xhttp = new XMLHttpRequest();
		xhttp.open("GET","test1.jsp",true);
		xhttp.send(); 
		xhttp.onreadystatechange = function() {
			if(this.readyState == 4 && this.status == 200) {
				const  num = xhttp.responseText.split(",")
				const arr = []
				for(let i = 0; i < num.length; i++) {
					const parsedNum = Number(num[i]);
					arr.push(parsedNum)
				}
				const maxnum = Math.max(...arr);
				document.querySelector("#result").innerHTML = "가장 큰 값 : " +maxnum;
			}
		}
	}
</script>
</body></html>
