<!DOCTYPE html>
<!-- /webapp/test0421/test1.html
   test1.html: ajax 객체를 통해 test1.jsp의 숫자 중 가장 큰값을 찾아 result 영역에 출력하기 
   test1.jsp : 0~99사이의 임의의 값을 10 개 생성하여 ,로 연결하여 전송하기
-->
<html>
<head>
<meta charset="UTF-8">
<title>ajax Test</title>
</head>
<body><div id="result"></div>
<script type="text/javascript">
const xhttp = new XMLHttpRequest()
xhttp.open("GET","test1.jsp")
xhttp.send()
xhttp.onreadystatechange=callBack

function callBack() {
	  if(xhttp.readyState == 4 && xhttp.status == 200) {
		  const nums = xhttp.responseText.split(",")
		  let max = parseInt(nums[0].trim())
		  let min = parseInt(nums[0].trim())
		  for(let i=1;i < nums.length;i++) {
			  nums[i] = parseInt(nums[i].trim())
			  if(max < nums[i]) max = nums[i]
			  if(min > nums[i]) min = nums[i]
		  }
		  document.querySelector("#result").innerHTML = 
	  "<strong> ["+this.responseText  +"]중 최대값:"+max+"<br>["
	   + this.responseText  +"]중 최소값:"+min+"</strong>"
	  }
}
</script>
</body></html>