<!DOCTYPE html>
<!-- 
	1. 로그인 버튼 클릭시 id,pass 값을 ex08_login.jsp 페이지로 전송
	2. ex08_login.jsp
		- member 테이블을 읽어 id,pass 검증
		- 일치 : 반갑습니다. name 님 => message 에 출력
		- 불일치 : 아이디또는 비밀번호가 틀립니다. => message 에 출력
--------------------------------------------------------------
	아이디 중복 버튼 클릭
		1. id 파라미터 값을 ex08_iddup.jsp로 전송
		2. ex08_iddup.jsp
			- member 테이블 읽기
			- 존재 : 존재하는 아이디 입니다. => message 에 출력.
					입력된 id를 제거
			- 존재 안함 : 회원가입이 가능한 아이디 입니다. =>message 에 출력 
 -->
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
</head>
<body>
<form name="f">
	아이디 : <input type="text" id="id">
			<input type="button" value="아이디 중복" id="btn"><br>
	비밀번호 : <input type="password" id="pass"><br>
			<input type="submit" value="로그인" id="loginbtn"><br>
</form>
<div id="message"></div>
<script type="text/javascript">
$(function() {
	$("#loginbtn").click(function() {
		let param = {id:$("#id").val(), pass:$("#pass").val()};
		$.ajax({
			url : "ex08_login.jsp",
			type : "POST",
			data : param,
			success : function(data) { // 정상 응답 완료
				$("#message").html(data);
			},
			error : function(e) { // 서버 오류 응답
				alert("서버 오류 :" + e.status);
			}
		});
		return false; // 기본기능을 처리하지마, 기본 submit 이벤트 취소
	});
	$("#btn").click(function() {
		if($("#id").val() == "") {
			$("#message").html("아이디를 입력하세요")
			return;
		}
		let param = {id:$("#id").val()};
		$.ajax({
			url : "ex08_iddup.jsp",
			type : "POST",
			data : param,
			success : function(data) { 
				$("#message").html(data)
				if($("#result").is(".find")) {
					$("#id").val(""); // 입력된 아이디값 제거
				}
			},
			error : function(e) { 
				alert("서버 오류 :" + e.status);
			}
		});
		
	});
});
</script>
</body>
</html>