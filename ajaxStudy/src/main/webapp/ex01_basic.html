<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>XMLHttpRequest 객체</title>
</head>
<body>
<h2>XMLHttpRequest 객체</h2>
<button onclick="loadJson()">요청</button>
<div id="demo">
	<script type="text/javascript">
		function loadJson() {
			const xhttp = new XMLHttpRequest(); // ajax 객체 . readyState : 0
												// 서버에 요청 할 수 있는 자바스크립트 객체
			// readyState : 1
			xhttp.open("GET","ex01_basic.jsp",true);// open(method,url,[비동기방식])
			// readyState : 2
			xhttp.send(); // 서버로 요청 기능 
			/*
				onreadystatechange : xhttp 객체의 상태가 변경되면 자동으로 호출되는 함수 설정 
					=> 콜백함수
			*/
			xhttp.onreadystatechange = function() {
			/*
				readyState : ajax 상태
					0 : 객체 생성
					1 : open() 실행.
					2 : send() 실행. 서버에 요청 완료. 서버 응답 없음 
					3 : 서버에 응답 중. 일부 응답 중
					4 : 서버에서 응답 완료
				status : 응답 코드. 서버에서 응답한 결과. HTTP 응답 코드
					200 : 정상 처리 완료
					404 : 서버 페이지 없음.
					500 : 서버 페이지에서 오류가 발생 했어
			*/
				if(this.readyState == 4 && this.status == 200) { // 정상 응답 완료
					// responseText : 서버에서 전달 받은 응답 메시지
					alert(this.responseText);
					document.querySelector("#demo").innerHTML = this.responseText;
				}
			}  
		}
	</script>
</div>
</body>
</html>